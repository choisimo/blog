name = "ai-check-gateway"
main = "src/index.ts"
compatibility_date = "2025-10-22"
compatibility_flags = ["nodejs_compat"]
account_id = "f6f11e2a4e5178d2f37476785018f761"

# Service binding to dedicated R2 gateway worker
services = [
  { binding = "R2_GATEWAY", service = "r2-gateway" }
]

# Optional runtime configuration for authentication
[vars]
AUTH_JWKS_URL = ""
AUTH_AUDIENCE = ""
AUTH_ISSUER = ""
AUTH_JWT_SECRET = ""
AUTH_CACHE_TTL_SECONDS = "300"
# Allowed origins for local development
ALLOWED_ORIGINS = "http://localhost:5173,http://localhost:4173,http://localhost:8080,http://localhost:8081"

# Secrets (set via Wrangler):
# wrangler secret put SECRET_API_KEY
# wrangler secret put SECRET_INTERNAL_KEY

[env.production]
name = "ai-check-gateway"
services = [
  { binding = "R2_GATEWAY", service = "r2-gateway", environment = "production" }
]

[env.production.vars]
# Comma-separated list of allowed origins
ALLOWED_ORIGINS = "https://noblog.nodove.com,https://blog.nodove.com,http://localhost:5173,http://localhost:4173,http://localhost:8080,http://localhost:8081"
# Backend host to forward to
REAL_BACKEND_HOST = "ai-serve.nodove.com"
AUTH_JWKS_URL = ""
AUTH_AUDIENCE = ""
AUTH_ISSUER = ""
AUTH_JWT_SECRET = ""
AUTH_CACHE_TTL_SECONDS = "300"

[[env.production.routes]]
pattern = "ai-check.nodove.com/*"
zone_name = "nodove.com"
