name = "ai-vision-gateway"
main = "src/index.ts"
compatibility_date = "2025-10-22"
compatibility_flags = ["nodejs_compat"]
account_id = "f6f11e2a4e5178d2f37476785018f761"

# KV Namespace for API keys
# Create with: wrangler kv:namespace create VISION_KV
# Then add keys: wrangler kv:key put --binding=VISION_KV "api_key_gemini" "YOUR_KEY"
#               wrangler kv:key put --binding=VISION_KV "api_key_openrouter" "YOUR_KEY"

[vars]
# Will be overridden in production env

# Secrets (alternative to KV):
# wrangler secret put GEMINI_API_KEY
# wrangler secret put OPENROUTER_API_KEY

[env.production]
name = "ai-vision-gateway"

[env.production.vars]
ALLOWED_ORIGINS = "https://noblog.nodove.com, https://blog.nodove.com, http://localhost:5173"

# KV binding for production
# Uncomment after creating: wrangler kv:namespace create VISION_KV --env production
# [[env.production.kv_namespaces]]
# binding = "VISION_KV"
# id = "YOUR_KV_NAMESPACE_ID"

[[env.production.routes]]
pattern = "ai-vision.nodove.com/*"
zone_name = "nodove.com"
