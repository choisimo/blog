---
title: "Proxmox 네트워크 추가하기"
date: "2025-12-28"
category: ["네트워크", "proxmox", "lxc"]
tags:
  [
    "vmbr",
    "vmbr_local",
    "proxmox",
    "vmbr0",
    "vmbr1",
    "bridge",
    "STP",
    "VLAN",
    "VLAN aware",
  ]
excerpt: "Proxmox 네트워크 추가하기"
readTime: "5분"
---

![1768261969281](/images/2026/proxmox-network-add/1768261969281.png)

Proxmox 서버를 처음 설치하고 나면, 보통 랜포트 하나만 활성화해서 사용하게 됩니다. 제 경우에도 `enp4s0`라는 물리 포트 하나만 `vmbr0` 브리지에 연결해서 외부 통신과 관리 페이지 접속을 처리하고 있었습니다. 고정 IP `192.168.1.30`을 할당해 두었고, 이 브리지를 통해 VM들이 외부와 통신하는 구조였죠. 그런데 문득 이런 생각이 들었습니다. "서버에 랜포트가 두 개인데, 하나(`enp3s0`)는 `Active: No` 상태로 그냥 놀고 있네?"

내부망 전용 네트워크를 따로 만들고 싶었습니다. OPNsense를 이용한 트래픽 제어를 위해 VM 전용 브리지가 필요했거든요. `enp4s0`는 이미 WAN 포트로 사용 중이니, 남는 `enp3s0`을 활용하기로 했습니다.

![1768262519346](/images/2026/proxmox-network-add/1768262519346.png)

Proxmox 웹 인터페이스에서 노드 > 네트워크 > Create로 들어가 **Linux Bridge**를 선택했습니다. 여기서 잠깐, 왜 이름이 "브리지"일까요? 사실 이건 소프트웨어로 구현된 L2 스위칭 허브입니다. 물리적인 스위치 장비처럼 여러 네트워크 인터페이스를 연결해주는 역할을 하는 거죠.

![1768262644265](/images/2026/proxmox-network-add/1768262644265.png)

이름은 `vmbr_local`로 지었습니다. 내부망이라는 의미를 명시적으로 담고 싶었거든요. IPv4/CIDR 필드는 사실 비워둬도 됩니다. 비우면 VM들이 DHCP로 개별 IP를 받아가도록 기본 설정되는데, 저는 Proxmox 호스트 자체에도 내부망 IP를 주고 싶어서 명시적으로 입력했습니다. Bridge Ports에는 아까 확인한 `enp3s0`을 기입했습니다. 이건 마치 인식표 같은 거라서 정확하게 적어야 합니다.

그런데 여기서 궁금증이 하나 생겼습니다. 왜 "port"가 아니라 "ports"라는 복수형 이름을 쓸까요? 스위치 장비를 생각해보면 답이 나옵니다. 랜선 포트가 하나만 있는 스위치는 의미가 없죠. 여러 장비를 연결해야 하니까 복수형인 겁니다. 실제로 리눅스 브리지는 여러 개의 물리 랜카드를 동시에 사용할 수 있습니다.

예를 들어 집에 남는 랜선 포트가 `enp3s0`와 `enp4s0` 두 개 있다고 가정해볼까요? `Bridge ports: enp3s0 enp4s0`처럼 스페이스로 구분해서 나열하면, Proxmox 서버가 마치 2포트짜리 스위칭 허브가 됩니다. `enp3s0`로 들어온 트래픽이 `enp4s0`로 나갈 수 있게 되는 거죠. 별도의 물리 스위치 장비 없이도 네트워크를 확장할 수 있습니다.

더 흥미로운 건, Bridge ports 필드에 물리 포트 하나만 기입해도 실제로는 수십에서 수백 개의 가상 포트가 이곳에 연결된다는 점입니다. VM을 생성하고 이 브리지를 할당하면, Proxmox는 내부적으로 `vnet0`, `vnet1`, `vnet2`... 같은 가상 케이블을 만들어냅니다. 이 가상 케이블들은 전부 `vmbr_local`이라는 스위치에 꽂히게 되는 거죠. 그러니까 브리지 입장에서는 물리 포트 1개와 가상 포트 N개를 관리하는 거대한 스위치인 셈입니다. 개념적으로 "Ports"가 맞는 이유입니다.

Proxmox의 웹 GUI는 사실 리눅스의 네트워크 설정 파일(`/etc/network/interfaces`)을 시각화한 것입니다. 실제 설정 파일을 열어보면 이렇게 생겼습니다.

![1768263528150](/images/2026/proxmox-network-add/1768263528150.png)

```bash
# /etc/network/interfaces 파일 예시
auto vmbr_local
iface vmbr_local inet static
    address 10.0.0.1/24
    bridge-ports enp3s0 enp4s0
    bridge-stp off
    bridge-fd 0
```

"Bridge Ports" 칸은 결국 스위치의 '업링크 포트' 목록을 적는 곳입니다. `vmbr_local`은 가상의 L2 스위치 장비 그 자체이고, Bridge Ports는 이 가상 스위치에 연결할 물리적 랜선들을 의미합니다. 물리 랜선을 2개 이상 꽂아서 스위치처럼 쓰거나 대역폭을 늘리는 구성이 가능하기 때문에 복수형인 거죠. 여러 선을 연결할 경우 루프를 방지하기 위해 Bridge-STP 기능을 켜야 할 수도 있습니다.

![1768263618943](/images/2026/proxmox-network-add/1768263618943.png)

설정을 마치고 나서 네트워크 구성을 확인해보니 잘 추가되어 있었습니다. 그런데 지금 돌아보니, 제가 설정한 방식에는 몇 가지 개선할 점이 보이더군요.

먼저 IP 주소 대역 문제입니다. 저는 처음에 `100.0.0.1/24` 대역을 내부망 IP로 설정했습니다. 그런데 `100.x.x.x` 대역은 사설 IP 표준 대역이 아닙니다. 일부는 공인 IP로 쓰이거나, `100.64.0.0/10` 대역은 통신사급 NAT(CGNAT) 용도로 예약되어 있어서 실제 인터넷상의 IP와 충돌할 우려가 있습니다. 국제 표준인 RFC 1918 사설 IP 대역 중 하나를 사용하는 게 안전합니다. `10.0.0.1/24`가 가장 추천되는데, `100`과 비슷해서 수정하기도 편하고요. `192.168.x.x`나 `172.16.x.x`도 괜찮습니다.

브리지 이름도 고민이 되더군요. 저는 `vmbr_local`로 지었는데, 기능상 오류는 없지만 Proxmox의 표준 관례는 `vmbr0`, `vmbr1`, `vmbr2` 순서로 숫자를 붙이는 겁니다. 혼자 사용하는 시스템이면 상관없지만, 추후 스크립트 자동화나 다른 사람과 협업을 고려한다면 `vmbr1`처럼 짓고 Comment 란에 "Internal Network"라고 적는 게 관리상 유리할 수 있습니다.

스크린샷을 보면 **VLAN aware**에 체크가 되어 있는데, 단순히 물리 포트 하나를 브리지로 쓰는 경우라면 굳이 체크할 필요는 없습니다. 내부망 안에서도 부서별이나 용도별로 가상 네트워크를 더 쪼개고 싶다면 VLAN 태깅을 사용해야 하니 켜두는 게 맞지만, 그게 아니라면 체크 해제해서 오버헤드를 줄일 수 있습니다.

마지막으로 게이트웨이 설정입니다. 저는 Gateway(IPv4)를 비워뒀는데, 이건 "Proxmox 호스트 자체"가 이 네트워크를 통해 인터넷으로 나가지 않겠다는 의미입니다. 내부망 구성 시에는 올바른 설정이죠. 다만 이 `vmbr_local`에 연결될 VM들이 인터넷을 하려면, 나중에 OPNsense VM이 이 브리지의 게이트웨이 역할(예: `10.0.0.254`)을 해야 한다는 점을 문서에 메모해두면 나중에 헷갈리지 않습니다.
