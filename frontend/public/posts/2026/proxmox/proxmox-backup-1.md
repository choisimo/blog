---
title: "Proxmox Backup 1"
date: "2026-01-15"
category: "proxmox"
tags: ["proxmox", "태그2", "태그3"]
excerpt: "게시글 요약을 작성하세요"
readTime: "5분"
---

# Proxmox 백업, 불안감에서 평온함으로 가는 여정

서버에 가상 머신(VM)과 컨테이너(CT)가 하나둘씩 늘어날 때마다 뿌듯함과 함께 마음 한구석에는 스멀스멀 불안감이 피어올랐습니다. 밤낮으로 정성껏 가꾼 이 소중한 데이터들이 한순간의 실수나 사고로 모두 사라진다면 어떡하지? 하는 막연한 두려움이었습니다. 그 불안감은 저를 Proxmox의 백업 시스템이라는 깊고도 체계적인 세계로 이끌었습니다. 체계적인 백업이란 대체 무엇일까? 어디서부터 어떻게 시작해야 마음 편히 잠들 수 있을까? 이 질문에 대한 답을 찾아가는 저의 여정을 여러분과 함께 나누고 싶습니다.

백업의 성패는 데이터를 어디에 보관하느냐, 즉 어떤 저장소를 선택하느냐에 달려있다고 해도 과언이 아닙니다. 이것은 단순히 파일을 옮겨두는 행위가 아니라, 유사시 나의 모든 것을 지켜줄 견고한 ‘금고’를 고르는 과정과 같았습니다. 처음에는 설정이 간편한 NFS나 서버의 로컬 디렉터리를 고려했습니다. 당장 시작하기에는 더없이 좋은 선택처럼 보였죠. 하지만 데이터가 쌓일수록 용량 부담이 커졌고, 매번 전체 데이터를 통째로 백업하는 건 시간과 자원 낭비라는 것을 깨달았습니다. 바로 그때, Proxmox Backup Server(PBS)의 ‘증분 백업’과 ‘중복 제거’ 기능이 눈에 들어왔습니다. 변경된 부분만 현명하게 저장하고, 중복되는 데이터는 한 번만 기록하여 공간을 극적으로 아껴주는 이 기능들은 단순한 편의를 넘어 프로덕션 환경에서는 필수적인 지혜였습니다. 단순히 데이터를 암호화하는 것을 넘어, 백업 서버로 전송되기 전에 제 서버에서 먼저 암호화되는 '클라이언트 단 암호화' 방식이라는 점이 결정적이었습니다. 이것은 백업 데이터가 네트워크를 떠도는 순간부터 저장소에 잠들어 있는 순간까지, 그 누구도 내용을 엿볼 수 없다는 강력한 신뢰를 주었죠.

좋은 금고를 골랐으니, 이제는 ‘어떻게’ 데이터를 안전하게 넣을 것인지 고민할 차례였습니다. 단순히 백업 버튼을 누르는 것과, 서비스의 안정성을 고려해 최적의 ‘백업 모드’를 선택하는 것은 전혀 다른 차원의 이야기였죠. 저는 운영 중인 서비스의 성격에 따라 각기 다른 전략을 세웠습니다. 사용자들이 계속 방문하는 일반적인 웹서버는 잠시의 멈춤도 없이 백업하고 싶어 ‘스냅샷(snapshot)’ 모드를 선택했습니다. 가상 머신에 설치된 QEMU 게스트 에이전트가 데이터의 일관성을 지켜주며 중단 없이 백업을 완료해 주었고, 만약 에이전트 설치가 어려운 경우라면 짧은 순간 서비스를 일시 정지하는 '일시 중단(suspend)' 모드라는 현명한 타협점도 찾을 수 있었습니다. 반면, 실시간으로 데이터가 오가는 중요한 데이터베이스 서버는 다른 접근이 필요했습니다. 단순히 VM을 정지시키는 'stop' 모드는 완벽한 일관성을 보장하지만 서비스 중단이 길어질 수 있었죠. 그래서 저는 데이터베이스 자체의 덤프(dump) 기능을 이용해 애플리케이션 수준에서 일관성을 확보한 뒤, 이를 포함하여 '스냅샷' 모드로 백업하는 다층적인 전략을 택했습니다. 이는 서비스 중단 없이도 데이터의 정합성을 최고 수준으로 보장하는 현명한 타협점이었습니다.

최적의 방법을 찾았으니, 이제는 이 모든 과정을 자동화하여 매일 밤 편히 잠들 수 있는 시스템을 구축할 시간이었습니다. 한번 설정으로 꾸준히 데이터를 지켜주는 자동화의 마법은, 백업을 신경 써야 한다는 사실 자체를 잊어버릴 자유를 주었습니다. 처음에는 `daily`나 `weekly` 같은 간단한 스케줄로 시작했지만, 곧 서버의 부하가 가장 적은 특정 시간을 지정하고 싶어졌습니다. 웹 인터페이스에서 `0 2 * * *` 라는 스케줄을 입력하는 순간은 마치 매일 새벽 2시, 내 데이터를 지켜주는 충실한 수호자를 임명하는 의식처럼 느껴졌습니다. 하지만 백업은 무작정 쌓아두는 것이 아니라, 현명하게 정리하는 기술이기도 했습니다. 보존 정책(Retention)이 바로 그 지혜였죠. 저는 마치 오래된 사진첩을 정리하듯 저만의 규칙을 만들었습니다. 매일의 기록은 최근 일주일 치만 보관하고, 주간의 중요한 기록은 한 달 치를, 그리고 월간 기록은 1년 치를 남기는 식으로 말입니다. 덕분에 저장 공간은 언제나 최적의 상태를 유지할 수 있었습니다.

이 모든 과정을 거치며 제가 얻은 가장 큰 수확은 단순히 기술적인 설정 방법이 아니었습니다. 그것은 바로 ‘데이터를 잃을지도 모른다’는 오랜 불안감으로부터의 해방, 즉 ‘심리적 평온함’이었습니다. 이제 저는 ‘3-2-1 규칙’—세 개의 복사본을, 두 개의 다른 미디어에, 그중 하나는 다른 장소에 보관하는 원칙—을 신조처럼 여기게 되었습니다. 분기마다 한 번씩은 실제로 백업 데이터를 복원해보는 테스트를 진행하고, 암호화 키는 혹시 모를 사태에 대비해 종이에 인쇄하여 안전한 곳에 보관합니다. 그리고 백업 실패 알림 설정은 이제 제게 선택이 아닌 필수입니다. 작동하고 있다고 믿었지만 실제로는 실패하고 있던 백업이야말로 가장 위험한 존재라는 것을 경험으로 깨달았기 때문입니다.

혹시 지금 저처럼 막연한 불안감에 시달리고 있다면, 완벽한 시작을 두려워하지 마세요. 지금 당장 가장 중요한 가상 머신 하나부터, 가장 간단한 스케줄로 백업을 시작해 보세요. 그렇게 한 걸음씩 나아가다 보면 어느새 당신만의 견고한 데이터 금고가 완성되어 있을 겁니다. 이 길의 끝에는 기술적 성취뿐만 아니라, 예상치 못한 평온함이 기다리고 있을 겁니다.
