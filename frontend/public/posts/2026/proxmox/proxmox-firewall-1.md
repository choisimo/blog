---
title: "Proxmox Firewall 1"
date: "2026-01-15"
category: "proxmox"
tags: ["proxmox", "태그2", "태그3"]
excerpt: "게시글 요약을 작성하세요"
readTime: "5분"
---

# Proxmox 방화벽과의 첫 만남: 복잡함 속에서 질서를 찾아가는 여정

저만의 작은 디지털 세상을 꿈꾸며 가상 환경을 구축했을 때의 설렘을 아직도 기억합니다. Proxmox VE 위에서 여러 가상 머신이 생명을 얻고 각자의 역할을 해내는 모습을 보는 것은 마치 미니어처 도시를 건설하는 창조주의 기분과도 같았습니다. 하지만 도시에 성벽을 쌓지 않으면 안 되듯, 외부 인터넷과 연결된 이 작은 세계에도 보안이라는 단단한 문이 필요하다는 것을 깨닫는 데는 오랜 시간이 걸리지 않았습니다. 그리고 저는 Proxmox의 '방화벽'이라는 메뉴 앞에서 처음으로 막막함이라는 거대한 벽과 마주했습니다.

단순히 켜고 끄는 스위치가 아니었습니다. 데이터센터, 호스트, 그리고 개별 가상 머신에까지 적용되는 계층 구조, 직관적으로 와닿지 않는 IN/OUT 방향과 규칙들, Security Group이니 IP Set이니 하는 낯선 개념들이 저를 압도했습니다. 혹시 여러분도 이런 경험 없으셨나요? 솔직히 처음엔 머리가 좀 아팠습니다. 가상 환경의 보안은 결코 가볍게 넘길 수 없는 중요한 첫걸음임에도, 어디서부터 어떻게 실타래를 풀어가야 할지 감조차 잡히지 않았습니다.

그래서 저는 정면으로 부딪혀보기로 했습니다. PVE 방화벽의 구조부터 규칙 문법까지, 이 복잡해 보이는 세계를 차근차근 탐험하며 나만의 질서를 찾아보기로 마음먹었습니다. 이 글은 그 여정에 대한 기록이자, 저처럼 막막함 앞에서 망설였을 누군가를 위한 작은 안내서입니다.

## 2. 본문: 벽돌 쌓기 - 개념을 이해하고 규칙을 세우다

### 2.1. 생각의 전환: 거대한 성문에서 각 방문의 잠금장치로

제가 방화벽에 대해 가졌던 첫인상은 '거대한 성문'이었습니다. 도시로 들어오는 모든 길목을 지키는 단 하나의 강력한 관문 말입니다. 그래서 처음에는 클러스터 전체를 관장하는 단 하나의 '마스터 방화벽' 설정을 찾으려 헤맸습니다. 하지만 그런 것은 존재하지 않았죠. 바로 그 지점에서 Proxmox의 전혀 다른 철학을 마주했고, 복잡하게 얽혀 있던 실마리가 풀리기 시작했습니다.

Proxmox의 방화벽은 중앙 집중형이 아닌 **분산 방화벽**이었습니다. 거대한 성문 하나에 의존하는 대신, 클러스터를 구성하는 각 서버(노드)와 그 안의 가상 머신(방)마다 똑똑한 디지털 잠금장치를 달아주는 방식이었습니다. 이 구조적 차이는 실로 엄청난 이점을 가져다주었습니다.

- 우선, 중앙에서 병목이 생길 걱정이 없었습니다. 각 노드가 알아서 트래픽을 처리하니 **고대역폭** 환경에서도 성능 저하 없이 제 역할을 해냈습니다.
- 또한, 가상 머신들끼리 서로 모르는 사이에 안전하게 **완전 격리**되었습니다. 설령 하나의 VM에 문제가 생겨도 다른 VM으로 불필요한 트래픽이 번져나갈 걱정을 덜 수 있었죠.
- 무엇보다 편리했던 것은 **자동 동기화** 기능이었습니다. 클러스터의 한 곳에서 방화벽 설정을 변경하면, Proxmox의 클러스터 파일 시스템(pmxcfs)이 마법처럼 모든 노드에 그 규칙을 알아서 적용해주었습니다.
- 별도의 설정 없이도 구형(IPv4)과 신형(IPv6) 주소 체계를 모두 알아서 처리해주어 **미래에도 대비**할 수 있었습니다.

이 구조를 이해하고 나니, 복잡해 보였던 설정들이 왜 필요한지 비로소 그림이 그려지기 시작했습니다. 이제 지도를 들고 각 설정 파일의 역할을 살펴볼 차례였습니다.

### 2.2. 나만의 지도 그리기: 설정 파일의 계층 구조

탐험을 시작하자 세 종류의 지도를 발견할 수 있었습니다. 처음에는 `cluster.fw`, `host.fw`, 그리고 `<VMID>.fw` 라는 파일들의 관계를 몰라 혼란스러웠습니다. 한번은 특정 VM에 규칙을 적용했는데, 더 상위의 보이지 않는 설정에 막혀 뜻대로 작동하지 않는 답답한 경험을 하기도 했습니다. 하지만 이내 그 안에서 명확한 위계를 발견하고 무릎을 쳤습니다.

가장 먼저 발견한 `cluster.fw`는 클러스터 전체에 적용되는, 감히 바꿀 수 없는 '헌법'과 같았습니다. 그 아래 각 노드에만 적용되는 `host.fw`는 지역의 특수성을 반영하는 '지방 조례'였고, 마지막으로 각 VM을 지키는 `<VMID>.fw`는 개별 건물의 출입을 통제하는 '건축법'처럼 가장 구체적인 규칙을 담고 있었습니다. 이러한 계층 구조야말로 각 노드와 VM이 자신만의 '디지털 잠금장치'를 갖는 분산 아키텍처를 체계적으로 관리하기 위한 필연적인 설계였습니다.

가장 큰 그림은 `cluster.fw`에서 그리고, 각 노드의 특수 상황은 `host.fw`에서 조율한 뒤, 마지막으로 가장 중요한 VM의 문은 `<VMID>.fw` 파일로 단단히 걸어 잠그는 방식이었습니다. 이 계층 구조 덕분에, 반복적인 작업을 크게 줄일 수 있는 더 효율적인 방법들이 눈에 들어오기 시작했습니다.

### 2.3. 효율을 더하는 마법 도구들: 이름표와 꾸러미 활용법

수십 개의 VM에 비슷한 규칙을 반복해서 입력하다 지쳐갈 때쯤, 저는 구세주 같은 도구들을 발견했습니다. 바로 **Security Group** , **IP Set** , 그리고 **Alias**였습니다. 이 기능들은 단순히 편리함을 넘어, 저의 방화벽 정책 전체를 한 단계 높은 수준으로 끌어올려 주었습니다.

- **Security Group (설정 꾸러미):** 자주 사용하는 방화벽 규칙들을 '웹 서버용 설정 꾸러미', '데이터베이스용 설정 꾸러미'처럼 만들어두고 필요할 때마다 가져다 쓰는 재사용 가능한 마법 주머니 같았습니다. 웹 서버 VM을 새로 만들 때마다 HTTP, HTTPS 규칙을 일일이 입력할 필요 없이, 미리 만들어 둔 '웹 서버용 꾸러미'를 적용하기만 하면 끝이었습니다.
- **IP Sets (손님 명단):** 매번 IP 주소를 입력하는 대신, '내부 관리자 그룹', '외부 파트너 그룹'처럼 IP 주소의 묶음에 이름을 붙여 관리하는 것이었습니다. 마치 파티의 '손님 명단(IP Set)'을 만들어두고, "이 구역은 VIP 손님 명단에 있는 사람들만 들어올 수 있습니다"라고 간단히 규칙을 정하는 것과 같았죠.
- **Aliases (이름표):** 기억하기 어려운 IP 주소나 네트워크 대역에 알기 쉬운 '이름표(Alias)'를 붙여주는 기능입니다. 특히 Proxmox가 기본으로 제공하는 `local_network`라는 이름표는 단순히 편리함을 넘어 클러스터가 생존하는 데 필수적인 역할을 했습니다. 클러스터 노드 간의 통신, 웹 인터페이스 접근, SSH 연결처럼 시스템의 심장 박동과도 같은 트래픽을 보장하는 생명줄과도 같았죠. 이 기본 별칭 덕분에, 제가 실수로 중요한 관리 포트를 막아버리는 치명적인 실수를 방지할 수 있었습니다.

이 도구들은 단순 반복 작업을 줄여주었을 뿐만 아니라, 방화벽 정책 전체를 훨씬 체계적이고 깔끔하게 관리할 수 있게 해주었습니다. 마치 어지러운 책상을 서랍과 라벨로 완벽하게 정리한 듯한 상쾌한 기분이었습니다.

## 3. 마무리: 나만의 성을 완성하며 - 얻은 것과 나아갈 길

처음 Proxmox 방화벽 앞에서 느꼈던 막막함은, 분산 아키텍처라는 큰 그림을 이해하고, 계층적 설정 파일이라는 지도를 손에 쥔 뒤, Security Group이나 Alias 같은 편리한 도구를 발견하면서 점차 자신감으로 바뀌었습니다. 벽돌 하나하나의 의미를 깨닫고 나니, 비로소 나만의 견고한 성을 쌓아 올리는 즐거움을 느낄 수 있었습니다.

이제 저에게 Proxmox 방화벽은 단순히 트래픽을 막는 벽이 아닙니다. 가상 환경이라는 나의 작은 도시에 질서를 부여하고, 각 건물(VM)의 역할을 명확히 정의하며, 안전한 통행로를 만들어주는 도시 계획 도구와도 같습니다.

물론 저의 탐험은 이제 시작입니다. 이제 막 성벽을 쌓았지만, 성 안의 시민들을 관리하는 '사용자 관리'라는 새로운 과제가 기다리고 있습니다. 다양한 인증 방식이나 2단계 인증(2FA) 같은 더 높은 수준의 보안을 탐험할 다음 여정이 벌써부터 기다려집니다.

혹시 저처럼 방화벽이라는 높은 벽 앞에서 망설이고 있다면, 이 글이 작은 디딤돌이 되었으면 좋겠습니다. 거대한 계획이 아니어도 괜찮습니다. 가장 중요한 서비스에 대한 규칙 하나를 추가하는 그 작은 첫걸음이, 결국 여러분만의 견고하고 안전한 디지털 세상을 완성하는 여정의 시작이 될 테니까요.
