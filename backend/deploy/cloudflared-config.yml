# =============================================================================
# Cloudflare Tunnel 설정 가이드 (Docker + Token 방식)
# =============================================================================
#
# 이 파일은 참고용입니다. 토큰 방식에서는 Cloudflare 대시보드에서 설정합니다.
#
# Architecture:
#   Internet → api.nodove.com → Cloudflare Tunnel → cloudflared (Docker)
#       → nginx (Docker network) → api (Docker network)
#
#   Internet → ai-serve.nodove.com → Cloudflare Tunnel → cloudflared (Docker)
#       → ai-serve (Docker network, port 4096)
#
# Internal services (localhost only, no tunnel):
#   - TEI:      127.0.0.1:8180
#   - ChromaDB: 127.0.0.1:8100
#   - Terminal: 127.0.0.1:8280
#   - AI Serve: 127.0.0.1:4096 (also exposed via tunnel)
#
# =============================================================================
# 설정 방법
# =============================================================================
#
# 1. Cloudflare Zero Trust 대시보드 접속:
#    https://one.dash.cloudflare.com/
#
# 2. Networks → Tunnels → Create a tunnel
#
# 3. Tunnel type: Cloudflared 선택
#
# 4. Tunnel 이름 입력: blog-api
#
# 5. Install and run a connector 단계에서:
#    - Docker 탭 선택
#    - 표시된 토큰 복사 (TUNNEL_TOKEN=... 부분)
#
# 6. 토큰을 .env 파일에 저장:
#    echo "CLOUDFLARE_TUNNEL_TOKEN=<복사한-토큰>" >> backend/.env
#
# 7. Public Hostnames 설정:
#
#    [Hostname 1 - API Server]
#    - Domain: api.nodove.com
#    - Service Type: HTTP
#    - URL: nginx:80
#    (Docker 네트워크 내부에서 nginx 서비스 이름으로 접근)
#
#    [Hostname 2 - AI Serve (LLM Gateway)]
#    - Domain: ai-serve.nodove.com
#    - Service Type: HTTP
#    - URL: ai-serve:4096
#    (Docker 네트워크 내부에서 ai-serve 서비스로 접근)
#
# 8. Docker Compose 실행:
#    cd backend && docker compose up -d
#
# =============================================================================
# Ingress 규칙 (Cloudflare 대시보드에서 설정)
# =============================================================================
#
# [Rule 1]
# Public Hostname: api.nodove.com
# Service: http://nginx:80
#
# [Rule 2]
# Public Hostname: ai-serve.nodove.com
# Service: http://ai-serve:4096
#
# 추가 설정 (Optional):
#   - No TLS Verify: Enabled (내부 HTTP 통신)
#   - HTTP Host Header: (각 도메인에 맞게 설정)
#
# =============================================================================
