# Caddyfile for blog backend services
# Place this file in /home/nodove/workspace/blog/backend/Caddyfile
#
# Domain Routing:
#   blog-b.nodove.com  -> Backend API, Terminal

# =============================================================================
# blog-b.nodove.com - Backend API, Terminal
# =============================================================================
blog-b.nodove.com {
    # API endpoints
    handle /api/* {
        reverse_proxy nginx:80
    }

    # Terminal WebSocket
    handle /terminal/* {
        reverse_proxy nginx:80
    }

    # Health check
    handle /health {
        reverse_proxy nginx:80
    }

    # Default - return 404
    handle {
        respond "Not Found" 404
    }

    # Enable gzip
    encode gzip

    # Logging
    log {
        output file /var/log/caddy/blog-b-access.log
    }
}
