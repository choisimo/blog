# =============================================================================
# Blog Backend - Environment Configuration
# =============================================================================
# Copy to .env and fill in values
#
# Architecture: Frontend -> Workers -> Backend
#   - Frontend: GitHub Pages (noblog.nodove.com)
#   - Workers: Cloudflare Workers (api.nodove.com) - Edge Gateway
#   - Backend: Self-hosted Docker (this server)
#
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
APP_ENV=production
HOST=0.0.0.0
PORT=5080
TRUST_PROXY=1
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Security: Backend Authentication Key
# -----------------------------------------------------------------------------
# Shared secret between Workers and Backend
# Workers sends this in X-Backend-Key header
# Generate with: openssl rand -hex 32
BACKEND_SECRET_KEY=

# -----------------------------------------------------------------------------
# URLs & CORS
# -----------------------------------------------------------------------------
SITE_BASE_URL=https://noblog.nodove.com
API_BASE_URL=https://api.nodove.com
ALLOWED_ORIGINS=https://noblog.nodove.com,http://localhost:5173

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# -----------------------------------------------------------------------------
# AI Provider Configuration
# -----------------------------------------------------------------------------
# Provider: 'litellm' (recommended), 'vas', or 'gemini'
AI_PROVIDER=litellm

# LiteLLM AI Gateway (Docker internal)
LITELLM_MASTER_KEY=sk-litellm-your-secret-key
LITELLM_BASE_URL=http://litellm:4000
AI_DEFAULT_MODEL=gpt-4.1

# Provider API Keys (used by LiteLLM)
OPENAI_API_KEY=
GOOGLE_API_KEY=
ANTHROPIC_API_KEY=

# Legacy: Direct Gemini (deprecated)
GEMINI_API_KEY=
GEMINI_MODEL=gemini-1.5-flash

# -----------------------------------------------------------------------------
# n8n Workflow Integration (Aidove)
# -----------------------------------------------------------------------------
AIDOVE_WEBHOOK_URL=https://api.nodove.com/webhook/aidove
AIDOVE_RAG_WEBHOOK_URL=https://api.nodove.com/webhook/aidove-rag
AIDOVE_API_KEY=
AIDOVE_WEBHOOK_TIMEOUT=120000

# -----------------------------------------------------------------------------
# Cloudflare D1 Database
# -----------------------------------------------------------------------------
CF_ACCOUNT_ID=f6f11e2a4e5178d2f37476785018f761
CF_API_TOKEN=
D1_DATABASE_ID=e547f944-71a0-42b6-8af1-abc50f29df80

# -----------------------------------------------------------------------------
# Cloudflare R2 Storage
# -----------------------------------------------------------------------------
R2_BUCKET_NAME=blog
R2_ASSETS_BASE_URL=https://assets-b.nodove.com

# -----------------------------------------------------------------------------
# GitHub Integration (Admin PR creation)
# -----------------------------------------------------------------------------
GITHUB_TOKEN=
GITHUB_REPO_OWNER=choisimo
GITHUB_REPO_NAME=blog
GIT_USER_NAME=CI Bot
GIT_USER_EMAIL=ci@example.com

# -----------------------------------------------------------------------------
# Admin Authentication
# -----------------------------------------------------------------------------
ADMIN_BEARER_TOKEN=
JWT_SECRET=
ADMIN_USERNAME=
ADMIN_PASSWORD=
