{
  "project": "Catalyst API & UX Refactor",
  "date": "2025-11-02",
  "owner": "frontend+workers",
  "epic": "Catalyst inline AI 강화",
  "tasks": [
    {
      "id": "CAT-1102-001",
      "title": "Unify Catalyst backend route with chat proxy",
      "description": "Remove legacy /api/v1/ai endpoints and expand chat proxy to handle Catalyst payloads with mode metadata.",
      "locations": [
        "workers/src/routes/chat.ts",
        "workers/src/routes/ai.ts",
        "workers/src/index.ts"
      ],
      "acceptance": [
        "Catalyst requests forward through chat proxy with correct headers.",
        "Legacy ai.ts route removed or deprecated behind flag.",
        "Chat widget regression tests pass."
      ]
    },
    {
      "id": "CAT-1102-002",
      "title": "Refactor frontend AI services to shared client",
      "description": "Create shared helper for chat/catalyst tasks, update SparkInline to use new client, and delete unused ai.ts endpoints.",
      "locations": [
        "frontend/src/services/chat.ts",
        "frontend/src/services/ai.ts",
        "frontend/src/components/features/sentio/SparkInline.tsx"
      ],
      "acceptance": [
        "SparkInline sketch/prism/chain call unified helper.",
        "No remaining references to deprecated /api/v1/ai/generate routes.",
        "Types updated and build passes."
      ]
    },
    {
      "id": "CAT-1102-003",
      "title": "Modernize Catalyst UX feedback",
      "description": "Swap modal spinner for inline pulse animation, wire toast-based error handling, and ensure busy state UX meets PRD.",
      "locations": [
        "frontend/public/ai-memo/ai-memo.js",
        "frontend/public/ai-memo/ai-memo.css"
      ],
      "acceptance": [
        "Catalyst button pulses during run and stops afterward.",
        "Success/error messages use toast, no alert dialogs remain.",
        "Memo stays editable while run is in progress."
      ]
    },
    {
      "id": "CAT-1102-004",
      "title": "Implement telemetry for Catalyst unified flow",
      "description": "Log Catalyst invocation, completion, and errors with request timing in front-end and ensure worker logs include identifiers.",
      "locations": [
        "frontend/public/ai-memo/ai-memo.js",
        "frontend/src/components/features/sentio/SparkInline.tsx",
        "workers/src/routes/chat.ts"
      ],
      "acceptance": [
        "logEvent entries include catalyst_invoke / catalyst_error with metadata.",
        "Worker logs include route and request ID fields.",
        "Documentation updated with new telemetry events."
      ]
    },
    {
      "id": "CAT-1102-005",
      "title": "QA unified Catalyst workflow",
      "description": "Run smoke tests for SparkInline, memo Catalyst, and chat to confirm unified API behavior.",
      "locations": ["manual"],
      "acceptance": [
        "SparkInline Sketch/Prism/Chain return expected JSON.",
        "Memo Catalyst run succeeds and handles errors gracefully.",
        "Chat widget unaffected."
      ]
    }
  ],
  "notes": "Coordinate rollout with AI gateway; keep feature flag for quick rollback."
}
