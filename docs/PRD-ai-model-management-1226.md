# AI ëª¨ë¸ ê´€ë¦¬ ì‹œìŠ¤í…œ ê³„íšì„œ

> **ì‘ì„±ì¼**: 2025-12-26  
> **ìƒíƒœ**: ê³„íš ë‹¨ê³„  
> **ìš°ì„ ìˆœìœ„**: Medium

---

## 1. í˜„ì¬ ìƒíƒœ ë¶„ì„

### 1.1 í˜„ì¬ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend (React)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚AI Chat  â”‚  â”‚AI Memo  â”‚  â”‚Catalyst â”‚  â”‚Sketch/Prism/Chain   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚            â”‚            â”‚                  â”‚
        â–¼            â–¼            â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Backend API (Express)                       â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    AIService (Unified)                    â”‚  â”‚
â”‚  â”‚  - Provider auto-detection (litellm > vas > gemini)      â”‚  â”‚
â”‚  â”‚  - Structured tasks (sketch, prism, chain, summary)      â”‚  â”‚
â”‚  â”‚  - Streaming, Vision, Embeddings support                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              LiteLLM Client (OpenAI-compatible)          â”‚  â”‚
â”‚  â”‚  - Circuit breaker                                        â”‚  â”‚
â”‚  â”‚  - Health check caching                                   â”‚  â”‚
â”‚  â”‚  - Timeout management                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   LiteLLM Proxy (Port 4000)                     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Router Settings                                            â”‚ â”‚
â”‚  â”‚  - routing_strategy: latency-based-routing                â”‚ â”‚
â”‚  â”‚  - fallbacks: gpt-4.1 â†’ gemini-1.5-flash â†’ claude-3-haiku â”‚ â”‚
â”‚  â”‚  - num_retries: 3                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Model List                                                 â”‚ â”‚
â”‚  â”‚  â”œâ”€ GitHub Copilot (VAS): gpt-4.1, gpt-4o, claude-sonnet-4â”‚ â”‚
â”‚  â”‚  â”œâ”€ OpenAI Direct: gpt-4o, gpt-4-turbo, gpt-3.5-turbo    â”‚ â”‚
â”‚  â”‚  â”œâ”€ Google Gemini: gemini-1.5-flash, gemini-1.5-pro      â”‚ â”‚
â”‚  â”‚  â”œâ”€ Anthropic: claude-3.5-sonnet, claude-3-opus          â”‚ â”‚
â”‚  â”‚  â””â”€ Local (Ollama): llama3, codellama                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í˜„ì¬ ì„¤ì • íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `backend/litellm_config.yaml` | LiteLLM í”„ë¡ì‹œ ì„¤ì • (ëª¨ë¸ ëª©ë¡, ë¼ìš°íŒ…, fallback) |
| `backend/src/lib/litellm-client.js` | OpenAI í˜¸í™˜ LiteLLM í´ë¼ì´ì–¸íŠ¸ |
| `backend/src/lib/ai-service.js` | í†µí•© AI ì„œë¹„ìŠ¤ (Provider ì¶”ìƒí™”) |
| `shared/ai/adapters.ts` | Providerë³„ ì‘ë‹µ í˜•ì‹ ì–´ëŒ‘í„° |

### 1.3 í˜„ì¬ í•œê³„ì 

1. **ì •ì  ì„¤ì •**: `litellm_config.yaml` ìˆ˜ì • ì‹œ ì„œë¹„ìŠ¤ ì¬ì‹œì‘ í•„ìš”
2. **ëª¨ë¸ ê´€ë¦¬ UI ë¶€ì¬**: ê´€ë¦¬ìê°€ ëª¨ë¸ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • ë¶ˆê°€
3. **ë¹„ìš© ì¶”ì  ì—†ìŒ**: ëª¨ë¸ë³„ ì‚¬ìš©ëŸ‰ ë° ë¹„ìš© ëª¨ë‹ˆí„°ë§ ë¶€ì¬
4. **API í‚¤ ê´€ë¦¬ ë¶„ì‚°**: í™˜ê²½ë³€ìˆ˜ë¡œ ë¶„ì‚° ê´€ë¦¬ë¨

---

## 2. ëª©í‘œ ì•„í‚¤í…ì²˜

### 2.1 ê°œì„ ëœ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Admin Dashboard                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              AI Model Management UI                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ Models  â”‚ â”‚Providersâ”‚ â”‚ Routes  â”‚ â”‚   Monitoring  â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Backend API (Express)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              AI Config API (/api/v1/admin/ai)            â”‚  â”‚
â”‚  â”‚  - GET/POST /models       : ëª¨ë¸ CRUD                    â”‚  â”‚
â”‚  â”‚  - GET/POST /providers    : Provider ê´€ë¦¬                â”‚  â”‚
â”‚  â”‚  - GET/POST /routes       : ë¼ìš°íŒ… ê·œì¹™ ê´€ë¦¬             â”‚  â”‚
â”‚  â”‚  - GET /usage             : ì‚¬ìš©ëŸ‰ ì¡°íšŒ                  â”‚  â”‚
â”‚  â”‚  - POST /reload           : LiteLLM ì„¤ì • ë¦¬ë¡œë“œ          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              AI Config Store (D1 Database)               â”‚  â”‚
â”‚  â”‚  - ai_providers: Provider ì •ë³´ (ì´ë¦„, API Key, ìƒíƒœ)     â”‚  â”‚
â”‚  â”‚  - ai_models: ëª¨ë¸ ì •ë³´ (ì´ë¦„, provider, íŒŒë¼ë¯¸í„°)       â”‚  â”‚
â”‚  â”‚  - ai_routes: ë¼ìš°íŒ… ê·œì¹™ (fallback, context_window)     â”‚  â”‚
â”‚  â”‚  - ai_usage_logs: ì‚¬ìš©ëŸ‰ ë¡œê·¸ (ëª¨ë¸, í† í°, ë¹„ìš©)         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               LiteLLM Proxy (Dynamic Config)                    â”‚
â”‚  - /config/update APIë¡œ ëŸ°íƒ€ì„ ì„¤ì • ë³€ê²½                        â”‚
â”‚  - ë°ì´í„°ë² ì´ìŠ¤ ê¸°ë°˜ ëª¨ë¸/ë¼ìš°íŒ… ì„¤ì •                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```sql
-- AI Provider ê´€ë¦¬
CREATE TABLE ai_providers (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,                    -- 'openai', 'anthropic', 'gemini', 'vas'
  display_name TEXT NOT NULL,            -- 'OpenAI', 'Anthropic Claude'
  api_base_url TEXT,                     -- Provider API URL
  api_key_env TEXT,                      -- í™˜ê²½ë³€ìˆ˜ ì´ë¦„ (ë³´ì•ˆ)
  is_enabled INTEGER DEFAULT 1,
  health_status TEXT DEFAULT 'unknown',  -- 'healthy', 'degraded', 'down'
  last_health_check TEXT,
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  updated_at TEXT DEFAULT CURRENT_TIMESTAMP
);

-- AI ëª¨ë¸ ê´€ë¦¬
CREATE TABLE ai_models (
  id TEXT PRIMARY KEY,
  provider_id TEXT NOT NULL REFERENCES ai_providers(id),
  model_name TEXT NOT NULL,              -- 'gpt-4.1' (LiteLLMì—ì„œ ì‚¬ìš©í•˜ëŠ” ì´ë¦„)
  display_name TEXT NOT NULL,            -- 'GPT-4.1 (GitHub Copilot)'
  litellm_model TEXT NOT NULL,           -- 'openai/gpt-4.1' (ì‹¤ì œ LiteLLM ëª¨ë¸ëª…)
  description TEXT,
  context_window INTEGER,                -- 128000
  max_tokens INTEGER,                    -- 4096
  input_cost_per_1k REAL,               -- $0.01
  output_cost_per_1k REAL,              -- $0.03
  supports_vision INTEGER DEFAULT 0,
  supports_streaming INTEGER DEFAULT 1,
  supports_function_calling INTEGER DEFAULT 0,
  is_enabled INTEGER DEFAULT 1,
  priority INTEGER DEFAULT 0,            -- ë†’ì„ìˆ˜ë¡ ìš°ì„  ì‚¬ìš©
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  updated_at TEXT DEFAULT CURRENT_TIMESTAMP
);

-- ë¼ìš°íŒ… ê·œì¹™
CREATE TABLE ai_routes (
  id TEXT PRIMARY KEY,
  name TEXT NOT NULL,                    -- 'default', 'high-context', 'fast'
  description TEXT,
  routing_strategy TEXT DEFAULT 'latency-based-routing',
  primary_model_id TEXT REFERENCES ai_models(id),
  fallback_model_ids TEXT,               -- JSON array of model IDs
  context_window_fallback_ids TEXT,      -- JSON array for long context
  num_retries INTEGER DEFAULT 3,
  timeout_seconds INTEGER DEFAULT 120,
  is_default INTEGER DEFAULT 0,
  is_enabled INTEGER DEFAULT 1,
  created_at TEXT DEFAULT CURRENT_TIMESTAMP,
  updated_at TEXT DEFAULT CURRENT_TIMESTAMP
);

-- ì‚¬ìš©ëŸ‰ ë¡œê·¸
CREATE TABLE ai_usage_logs (
  id TEXT PRIMARY KEY,
  model_id TEXT REFERENCES ai_models(id),
  route_id TEXT REFERENCES ai_routes(id),
  request_type TEXT,                     -- 'chat', 'completion', 'embedding', 'vision'
  prompt_tokens INTEGER,
  completion_tokens INTEGER,
  total_tokens INTEGER,
  estimated_cost REAL,
  latency_ms INTEGER,
  status TEXT,                           -- 'success', 'error', 'timeout'
  error_message TEXT,
  user_id TEXT,
  created_at TEXT DEFAULT CURRENT_TIMESTAMP
);

-- ì¼ë³„ ì‚¬ìš©ëŸ‰ ì§‘ê³„
CREATE TABLE ai_usage_daily (
  date TEXT NOT NULL,
  model_id TEXT NOT NULL REFERENCES ai_models(id),
  total_requests INTEGER DEFAULT 0,
  total_tokens INTEGER DEFAULT 0,
  total_cost REAL DEFAULT 0,
  success_count INTEGER DEFAULT 0,
  error_count INTEGER DEFAULT 0,
  avg_latency_ms REAL,
  PRIMARY KEY (date, model_id)
);
```

---

## 3. Admin UI ì„¤ê³„

### 3.1 AI Models íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI Models                                           [+ Add Model]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Filter: [All Providers â–¼] [Enabled Only â˜‘]  Search: [____] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸŸ¢ gpt-4.1                              GitHub Copilot    â”‚   â”‚
â”‚ â”‚ GPT-4.1 via VAS - Primary model for all AI features       â”‚   â”‚
â”‚ â”‚ Context: 128K | Vision: âœ“ | Streaming: âœ“                  â”‚   â”‚
â”‚ â”‚ Cost: $0.01/1K input, $0.03/1K output                     â”‚   â”‚
â”‚ â”‚ Today: 1,234 requests | 45.2K tokens | $1.35              â”‚   â”‚
â”‚ â”‚                                    [Test] [Edit] [Disable]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸŸ¢ gemini-1.5-flash                     Google Gemini     â”‚   â”‚
â”‚ â”‚ Fast, cheap fallback model                                â”‚   â”‚
â”‚ â”‚ Context: 1M | Vision: âœ“ | Streaming: âœ“                    â”‚   â”‚
â”‚ â”‚ Cost: $0.00035/1K input, $0.0014/1K output               â”‚   â”‚
â”‚ â”‚ Today: 89 requests | 12.1K tokens | $0.02                 â”‚   â”‚
â”‚ â”‚                                    [Test] [Edit] [Disable]â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ”´ claude-3.5-sonnet                    Anthropic         â”‚   â”‚
â”‚ â”‚ API Key not configured                                    â”‚   â”‚
â”‚ â”‚                                    [Configure] [Remove]   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Routing íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Routing Rules                                      [+ Add Route]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â˜… Default Route (Active)                                  â”‚   â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚ â”‚ â”‚ Strategy: Latency-Based Routing                     â”‚   â”‚   â”‚
â”‚ â”‚ â”‚                                                     â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ Primary: gpt-4.1                                    â”‚   â”‚   â”‚
â”‚ â”‚ â”‚    â†“ (on failure)                                   â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ Fallback 1: gemini-1.5-flash                       â”‚   â”‚   â”‚
â”‚ â”‚ â”‚    â†“ (on failure)                                   â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ Fallback 2: claude-3-haiku                         â”‚   â”‚   â”‚
â”‚ â”‚ â”‚                                                     â”‚   â”‚   â”‚
â”‚ â”‚ â”‚ Retries: 3 | Timeout: 120s                         â”‚   â”‚   â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚ â”‚                                           [Edit] [Clone]  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Long Context Route                                        â”‚   â”‚
â”‚ â”‚ For requests > 32K tokens                                 â”‚   â”‚
â”‚ â”‚ Primary: gemini-1.5-pro (1M context)                     â”‚   â”‚
â”‚ â”‚                                [Set as Default] [Edit]    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Usage & Monitoring íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usage & Monitoring                        Period: [Last 7 Days â–¼]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Summary                                                     â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚ â”‚ â”‚ Requests â”‚ â”‚  Tokens  â”‚ â”‚   Cost   â”‚ â”‚  Avg Latency     â”‚â”‚ â”‚
â”‚ â”‚ â”‚  8,234   â”‚ â”‚  1.2M    â”‚ â”‚  $24.56  â”‚ â”‚    1.2s          â”‚â”‚ â”‚
â”‚ â”‚ â”‚  +12%    â”‚ â”‚  +8%     â”‚ â”‚  +15%    â”‚ â”‚    -0.3s         â”‚â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Usage by Model                                              â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ gpt-4.1 (72%)           â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ gemini-1.5-flash (18%)  â”‚ â”‚
â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ claude-3-haiku (10%)    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Daily Trend Chart                                           â”‚ â”‚
â”‚ â”‚     ^                                                       â”‚ â”‚
â”‚ â”‚  2k â”‚    â–„â–„                                                â”‚ â”‚
â”‚ â”‚     â”‚  â–„â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„    â–„â–„                                       â”‚ â”‚
â”‚ â”‚  1k â”‚â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–„â–„â–„â–„                                  â”‚ â”‚
â”‚ â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>         â”‚ â”‚
â”‚ â”‚      Mon  Tue  Wed  Thu  Fri  Sat  Sun                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. API ì„¤ê³„

### 4.1 Models API

```typescript
// GET /api/v1/admin/ai/models
// ëª¨ë¸ ëª©ë¡ ì¡°íšŒ
Response: {
  models: [{
    id: string;
    modelName: string;
    displayName: string;
    provider: { id: string; name: string; displayName: string };
    contextWindow: number;
    capabilities: { vision: boolean; streaming: boolean; functionCalling: boolean };
    cost: { inputPer1k: number; outputPer1k: number };
    isEnabled: boolean;
    healthStatus: 'healthy' | 'degraded' | 'down' | 'unknown';
  }]
}

// POST /api/v1/admin/ai/models
// ëª¨ë¸ ì¶”ê°€
Request: {
  modelName: string;
  displayName: string;
  providerId: string;
  litellmModel: string;
  contextWindow?: number;
  maxTokens?: number;
  inputCostPer1k?: number;
  outputCostPer1k?: number;
  supportsVision?: boolean;
}

// PUT /api/v1/admin/ai/models/:id
// ëª¨ë¸ ìˆ˜ì •

// DELETE /api/v1/admin/ai/models/:id
// ëª¨ë¸ ì‚­ì œ

// POST /api/v1/admin/ai/models/:id/test
// ëª¨ë¸ í…ŒìŠ¤íŠ¸
Request: { prompt?: string }
Response: { success: boolean; latencyMs: number; response?: string; error?: string }
```

### 4.2 Providers API

```typescript
// GET /api/v1/admin/ai/providers
// Provider ëª©ë¡ ì¡°íšŒ

// POST /api/v1/admin/ai/providers
// Provider ì¶”ê°€
Request: {
  name: string;           // 'openai', 'anthropic', etc.
  displayName: string;
  apiBaseUrl?: string;
  apiKeyEnv: string;      // í™˜ê²½ë³€ìˆ˜ ì´ë¦„ (ì‹¤ì œ í‚¤ëŠ” ì €ì¥í•˜ì§€ ì•ŠìŒ)
}

// PUT /api/v1/admin/ai/providers/:id/health
// Health check ì‹¤í–‰
Response: { status: 'healthy' | 'degraded' | 'down'; latencyMs: number; error?: string }
```

### 4.3 Routes API

```typescript
// GET /api/v1/admin/ai/routes
// ë¼ìš°íŒ… ê·œì¹™ ëª©ë¡

// POST /api/v1/admin/ai/routes
// ë¼ìš°íŒ… ê·œì¹™ ì¶”ê°€
Request: {
  name: string;
  routingStrategy: 'simple' | 'latency-based-routing' | 'cost-based-routing';
  primaryModelId: string;
  fallbackModelIds: string[];
  numRetries?: number;
  timeoutSeconds?: number;
  isDefault?: boolean;
}

// POST /api/v1/admin/ai/reload
// LiteLLM ì„¤ì • ë¦¬ë¡œë“œ (DB ê¸°ë°˜ ì„¤ì •ì„ YAMLë¡œ ë³€í™˜ í›„ ì ìš©)
```

### 4.4 Usage API

```typescript
// GET /api/v1/admin/ai/usage
// ì‚¬ìš©ëŸ‰ ì¡°íšŒ
Query: { 
  startDate: string;  // ISO date
  endDate: string;
  modelId?: string;
  groupBy?: 'day' | 'model' | 'route';
}
Response: {
  summary: {
    totalRequests: number;
    totalTokens: number;
    totalCost: number;
    avgLatencyMs: number;
  };
  breakdown: [{
    date?: string;
    model?: { id: string; name: string };
    requests: number;
    tokens: number;
    cost: number;
  }]
}
```

---

## 5. êµ¬í˜„ ê³„íš

### Phase 1: ê¸°ë°˜ êµ¬ì¶• (1ì£¼)

| í•­ëª© | ì„¤ëª… |
|------|------|
| DB ìŠ¤í‚¤ë§ˆ | D1 ë§ˆì´ê·¸ë ˆì´ì…˜ íŒŒì¼ ì‘ì„± |
| Seed ë°ì´í„° | ê¸°ì¡´ `litellm_config.yaml` ê¸°ë°˜ ì´ˆê¸° ë°ì´í„° ìƒì„± |
| Backend API | Models, Providers CRUD API êµ¬í˜„ |

### Phase 2: Admin UI (1ì£¼)

| í•­ëª© | ì„¤ëª… |
|------|------|
| Models íƒ­ | ëª¨ë¸ ëª©ë¡, ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ, í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥ |
| Providers íƒ­ | Provider ê´€ë¦¬, Health check |
| í†µí•© | AdminConfig í˜ì´ì§€ì— AI íƒ­ ì¶”ê°€ |

### Phase 3: ë¼ìš°íŒ… & ëª¨ë‹ˆí„°ë§ (1ì£¼)

| í•­ëª© | ì„¤ëª… |
|------|------|
| Routes íƒ­ | ë¼ìš°íŒ… ê·œì¹™ ê´€ë¦¬ UI |
| LiteLLM ì—°ë™ | ë™ì  ì„¤ì • ë¦¬ë¡œë“œ API |
| Usage íƒ­ | ì‚¬ìš©ëŸ‰ ëŒ€ì‹œë³´ë“œ, ì°¨íŠ¸ |

### Phase 4: ê³ ê¸‰ ê¸°ëŠ¥ (ì¶”í›„)

| í•­ëª© | ì„¤ëª… |
|------|------|
| ì˜ˆì‚° ê´€ë¦¬ | ì¼/ì›”ë³„ ë¹„ìš© í•œë„ ì„¤ì • |
| ì•Œë¦¼ | ë¹„ìš© ì´ˆê³¼, ì¥ì•  ì•Œë¦¼ (Slack, Email) |
| A/B í…ŒìŠ¤íŠ¸ | ëª¨ë¸ ì„±ëŠ¥ ë¹„êµ í…ŒìŠ¤íŠ¸ |

---

## 6. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **API í‚¤ ê´€ë¦¬**
   - API í‚¤ëŠ” ë°ì´í„°ë² ì´ìŠ¤ì— ì§ì ‘ ì €ì¥í•˜ì§€ ì•ŠìŒ
   - í™˜ê²½ë³€ìˆ˜ ì´ë¦„ë§Œ ì €ì¥í•˜ê³ , ì‹¤ì œ í‚¤ëŠ” í™˜ê²½ë³€ìˆ˜ë¡œ ê´€ë¦¬
   - Workers Secrets ë˜ëŠ” Backend .env íŒŒì¼ ì‚¬ìš©

2. **ì ‘ê·¼ ì œì–´**
   - ëª¨ë“  `/admin/ai/*` ì—”ë“œí¬ì¸íŠ¸ëŠ” `requireAdmin` ë¯¸ë“¤ì›¨ì–´ ì ìš©
   - JWT í† í° ë˜ëŠ” Bearer í† í° ì¸ì¦ í•„ìˆ˜

3. **ê°ì‚¬ ë¡œê·¸**
   - ëª¨ë¸/Provider ë³€ê²½ ì‹œ ê°ì‚¬ ë¡œê·¸ ê¸°ë¡
   - ì„¤ì • ë³€ê²½ ì´ë ¥ ì¶”ì 

---

## 7. ì˜ˆìƒ íš¨ê³¼

| í•­ëª© | Before | After |
|------|--------|-------|
| ëª¨ë¸ ì¶”ê°€ | YAML ìˆ˜ì • â†’ ì„œë¹„ìŠ¤ ì¬ì‹œì‘ | UIì—ì„œ ì‹¤ì‹œê°„ ì¶”ê°€ |
| ë¹„ìš© ì¶”ì  | ìˆ˜ë™ ê³„ì‚° | ìë™ ì§‘ê³„ ë° ëŒ€ì‹œë³´ë“œ |
| ì¥ì•  ëŒ€ì‘ | ë¡œê·¸ í™•ì¸ í›„ ìˆ˜ë™ ì „í™˜ | ìë™ fallback + ì•Œë¦¼ |
| Provider ì „í™˜ | ì½”ë“œ ìˆ˜ì • í•„ìš” | UIì—ì„œ í™œì„±í™”/ë¹„í™œì„±í™” |

---

## 8. ì°¸ê³  ìë£Œ

- [LiteLLM Documentation](https://docs.litellm.ai/)
- [LiteLLM Proxy Config](https://docs.litellm.ai/docs/proxy/configs)
- [LiteLLM Dynamic Config](https://docs.litellm.ai/docs/proxy/config)
- ê¸°ì¡´ ì„¤ì •: `backend/litellm_config.yaml`
- AI Service: `backend/src/lib/ai-service.js`
