# Unified .env (single source of truth)
# Copy this file to .env at the repo root and edit values.
# Backend reads ../.env first then backend/.env overrides. Frontend Vite also
# loads env from the repo root via envDir.

# --- App/Server ---
APP_ENV=development
HOST=0.0.0.0
PORT=5080
TRUST_PROXY=1
LOG_LEVEL=info

# --- Consul (optional) ---
# When enabled, config is loaded from Consul KV (blog/config/*, blog/services/*).
USE_CONSUL=false
CONSUL_HOST=consul
CONSUL_PORT=8500

# --- URLs & CORS ---
# Public site base URL (protocol + domain, no trailing slash)
SITE_BASE_URL=https://noblog.nodove.com
# The backend's externally reachable base URL (used in public config and clients)
API_BASE_URL=http://localhost:5080
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS=https://noblog.nodove.com,http://localhost:8080,http://localhost:5173

# --- Frontend (Vite) ---
# Values exposed to the client must be prefixed with VITE_
VITE_SITE_BASE_URL=https://noblog.nodove.com
VITE_API_BASE_URL=http://localhost:5080
# Optional override for terminal gateway URL (wss/https)
VITE_TERMINAL_GATEWAY_URL=
# Site metadata for SEO
VITE_SITE_NAME=nodove-blog
VITE_AUTHOR_NAME=nodove
# Dev server host/port overrides (optional)
VITE_DEV_HOST=::
VITE_DEV_PORT=8080

# --- Rate limit ---
RATE_LIMIT_MAX=60
RATE_LIMIT_WINDOW_MS=60000

# --- Feature Flags (optional) ---
FEATURE_AI_ENABLED=true
FEATURE_RAG_ENABLED=true
FEATURE_TERMINAL_ENABLED=true
FEATURE_AI_INLINE=true
FEATURE_COMMENTS_ENABLED=true

# --- Service URLs (optional; Consul overrides when enabled) ---
INTERNAL_API_URL=
TERMINAL_SERVER_URL=http://terminal-server:8080
TERMINAL_GATEWAY_URL=https://terminal.nodove.com

# --- RAG Services ---
TEI_URL=http://embedding-server:80
CHROMA_URL=http://chromadb:8000
CHROMA_COLLECTION=blog-posts-all-MiniLM-L6-v2

# --- Redis (optional) ---
REDIS_URL=

# --- Assets (optional) ---
# Public assets base URL (e.g. https://example.com/images). Defaults to SITE_BASE_URL/images
ASSETS_BASE_URL=

# --- Content (optional) ---
CONTENT_PUBLIC_DIR=
CONTENT_POSTS_DIR=
CONTENT_IMAGES_DIR=
POSTS_SOURCE=filesystem

# --- AI Server (LiteLLM Unified Gateway) ---
# All AI requests route through LiteLLM proxy.
# LiteLLM routes to GitHub Models using GITHUB_TOKEN.
AI_SERVER_URL=http://litellm:4000/v1
LITELLM_URL=http://litellm:4000
AI_DEFAULT_MODEL=gpt-4.1
AI_ASYNC_MODE=false
AI_RATE_LIMIT_WINDOW_MS=60000
AI_RATE_LIMIT_MAX=30

# --- AI Search Providers ---
# Perplexity AI Search (AI-powered search with citations)
PERPLEXITY_API_KEY=
# Tavily Search (AI-optimized search engine)
TAVILY_API_KEY=
# Brave Search (optional)
BRAVE_SEARCH_API_KEY=
# Serper Google search (optional)
SERPER_API_KEY=

# GitHub Token (used by LiteLLM for GitHub Models authentication)
# Get from: https://github.com/settings/tokens
GITHUB_TOKEN=

# --- JWT Configuration ---
JWT_EXPIRES_IN=12h

# --- Firebase Admin (optional) ---
# Provide a single-line, minified JSON string for the service account
# Example: {"project_id":"...","client_email":"...","private_key":"-----BEGIN PRIVATE KEY-----\\n...\\n-----END PRIVATE KEY-----\\n"}
FIREBASE_SERVICE_ACCOUNT_JSON=
FIREBASE_PROJECT_ID=

# --- GitHub (optional, used by admin routes) ---
GITHUB_TOKEN=
GITHUB_REPO_OWNER=
GITHUB_REPO_NAME=
GIT_USER_NAME=
GIT_USER_EMAIL=

# --- Admin/Auth (optional) ---
ADMIN_BEARER_TOKEN=
JWT_SECRET=
ADMIN_USERNAME=
ADMIN_PASSWORD=

# --- Integrations ---
# Optional deploy hook called after archival operations
VERCEL_DEPLOY_HOOK_URL=
